<html>
<head>
	<title>Projna</title>
    <meta charset="utf-8">
    <link rel="shortcut icon" href="../images/logo.png" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap.min.css">
    <script src="https://cdn.bootcss.com/jquery/3.1.0/jquery.min.js"></script>
    <script src="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>
    <script src="../scripts/utility.js"></script>
    <link rel="stylesheet" type="text/css" href="../css/mystyle.css"/>
</head>
<body>
	<div class = "container-fluid">
		<div id = "divH"></div>
		<div id = "divC" class = "container">
			<div id = "intro">
				<h1>Book Seeds</h1>
				<h3>Name the books you thought suitable for children in each age, because a person's ideas ought to be past on to next generations, and that can be done by books he/she thoughtfully recomended.</h3>
				<button id = "stb" class = "btn btn-default">Start to Build</button>
			</div>
			<form id = "working" class = "form-horizontal" role="form">
				<div id = "age2" class="form-group">
					<label for="name" class="col-sm-2 control-label">Age 2</label>
					<div class = "col-sm-10">
						<input type="text" class="form-control" id="name" placeholder="The book name you recommend for this age">
					</div>
				</div>
				<button type="submit" class="btn btn-default">Submit</button>
			</form>
			<div id = "result" class="table-responsive">
				<table class="table">
					<caption>Projna's Book Seeds</caption>
					<thead>
						<tr>
							<th>Age</th>
							<th>Book Name</th>
						</tr>
					</thead>
					<tbody id = "oneseed">
<!-- 						<tr>
							<td>2</td>
							<td></td>
						</tr> -->
					</tbody>
				</table>
				<button id = "edit" type="submit" class="btn btn-default">Edit</button>
			</div>
		</div>
		<div id = "divF" ></div>
	</div>
</body>
<script type="text/javascript">
//load the page html
	$("#divH").load("../public/pages/utility.html #divheader");
	$("#divF").load("../public/pages/utility.html #divfooter");
</script>
<script type="text/javascript">
var m;
// get data from server: user, looking, project
$(document).ready(function(){
	$.ajax({
		type : "GET",
		url : "/project/loadbookseeds",
		data : {},
		success : function(msg){
			m = jQuery.parseJSON(JSON.stringify(msg));
			renderbookseeds(m);
		},
		error : function(msg) {}
	});
});
//find what state this project is in, intro? working? result?
//get 
function renderbookseeds(msg){
	if(msg.state === "visitor"){
		renderbookseedsvisitor(msg);
	}else if(msg.state === "self"){
		renderbookseedsself(msg);
	}else if(msg.state === "other"){
		renderbookseedsother(msg);
	}
}
//render the page with data and status
function renderbookseedsvisitor(msg){
	$("#intro").show();
	$("#working").hide();
	$("#result").hide();

	$("#intro").find("h1").text(msg.project.title);
	$("#intro").find("h3").text(msg.project.desc);
}
function renderbookseedsself(msg){
	$("#intro").show();
	$("#stb").hide();
	$("#working").hide();
	$("#result").show();

	$("#intro").find("h1").text(msg.project.title);
	$("#intro").find("h3").text(msg.project.desc);
	var bslist = msg.project.data.bslist;
	for(var bs in bslist){
		listbookseeds(bs);
	}
}

function listbookseeds(bs){
	var tr = "<tr></tr>";
	var tdage = "<td></td>"; tdage.text(bs.age);
	var tdbookname = "<td></td>"; tdbookname.text(bs.bookname);

	tr.append(tdage);
	tr.append(tdbookname);

	$("#oneseed").append(tr);
}

function renderbookseedsother(msg){
	$("#intro").show();
	$("#working").hide();
	$("#result").show();
	$("#edit").hide();

	$("#intro").find("h1").text(msg.project.title);
	$("#intro").find("h3").text(msg.project.desc);
	var bslist = msg.project.data.bslist;
	for(var bs in bslist){
		listbookseeds(bs);
	}
}
//handle user's input
</script>
</html>

















